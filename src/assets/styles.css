

/* --- 全局变量系统 (Design Tokens) --- */
:root {
  /* 1. 色彩系统 */
  --color-bg: #050505;
  --color-text-main: #e6e6e6;
  --color-text-dim: #888;
  --color-accent: #61b1d6; /* 核心蓝 */
  
  --border-tech: rgba(255, 255, 255, 0.15); 
  
  /* 2. 尺寸系统 (放大版 UI) */
  --ui-margin: 60px;       /* 核心边距：控制线的位置 */
  --sidebar-width: 400px;  /* 侧边栏宽度 */
  --dot-size: 10px;        /* 圆点大小 */
  --line-width: 1px;       /* 线条粗细 */
  
  /* 3. 对齐计算 (自动计算圆点偏移量，确保穿过圆心) */
  /* 公式：边距 - (圆点直径 / 2) = 圆点的起始偏移量 */
  --element-offset: calc(var(--ui-margin) - (var(--dot-size) / 2));
}

/* 基础重置 */
html,
body {
  background-color: var(--color-bg);
  color: var(--color-text-main);
  /* 字体组合 */
  font-family: 'Space Grotesk', 'Noto Sans SC', monospace; 
  overflow: hidden;
  margin: 0;
  padding: 0;
  width: 100vw;
  height: 100vh;
}

canvas {
  display: block;
}

.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.5s ease;
}
.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}

/* --- Font Face --- */
@font-face {
  font-family: 'Noto Sans SC';
  src: url('@/assets/NotoSansSC-Medium.ttf') format('truetype');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

/* --- Parallax System & Cross Grid --- */

/* 1. 背景纹理 */
.cross-grid-bg {
    background-color: #050505;
    background-image: 
        /* 1. 水平细线 */
        linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px),
        /* 2. 垂直细线 */
        linear-gradient(90deg, rgba(255,255,255,0.05) 1px, transparent 1px),
        /* 3. 45度交叉斜线 (低透明度) */
        linear-gradient(45deg, rgba(255,255,255,0.03) 1px, transparent 1px),
        /* 4. -45度交叉斜线 (低透明度) */
        linear-gradient(-45deg, rgba(255,255,255,0.03) 1px, transparent 1px);
    
    /* Core: Grid Size */
    background-size: 160px 160px;
    background-position: center;
}

/* 2. Layer Definitions */
.layer-bg, .layer-content {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    box-sizing: border-box; /* Fix for padding causing overflow */
    transition: transform 0.8s cubic-bezier(0.22, 1, 0.36, 1);
}

.layer-bg {
    z-index: 0;
    will-change: transform; /* Performance Optimization */
}

.layer-content {
    z-index: 10;
}

/* 路由转场 & 内容视差 (Content Parallax) */

/* 1. 基础状态 (Default State for transition) */
.layer-content {
    z-index: 10;
}

/* Recursive Stagger Targeting: Target ALL relevant descendants */
.layer-content h1, 
.layer-content h2, 
.layer-content h3, 
.layer-content h4, 
.layer-content .profile-header, 
.layer-content .section-header, 
.layer-content .archive-header,
.layer-content .detail-grid,
.layer-content .project-list,
.layer-content .skills-list,
.layer-content .archive-tabs,
.layer-content .projects-visual-section,
.layer-content .skills-visual,
.layer-content .archive-right {
    transition: all 0.6s cubic-bezier(0.22, 1, 0.36, 1); 
    backface-visibility: hidden;
}

/* 2. 激活状态 (Active) - 必须定义以保持过渡 */
.parallax-enter-active,
.parallax-leave-active {
    transition: all 0.8s cubic-bezier(0.22, 1, 0.36, 1);
}

/* 3. 离开 (Leave) - 页面消失 */
.parallax-leave-to {
    opacity: 0;
}

/* Staggered Children Exit */
.parallax-leave-to .layer-content h1, 
.parallax-leave-to .layer-content h2, 
.parallax-leave-to .layer-content h3, 
.parallax-leave-to .layer-content h4, 
.parallax-leave-to .layer-content .profile-header, 
.parallax-leave-to .layer-content .section-header, 
.parallax-leave-to .layer-content .archive-header,
.parallax-leave-to .layer-content .detail-grid,
.parallax-leave-to .layer-content .project-list,
.parallax-leave-to .layer-content .skills-list,
.parallax-leave-to .layer-content .archive-tabs,
.parallax-leave-to .layer-content .projects-visual-section,
.parallax-leave-to .layer-content .skills-visual,
.parallax-leave-to .layer-content .archive-right {
    opacity: 0;
    transform: translateY(-20px);
}

/* 4. 进入 (Enter) - 页面出现 */
.parallax-enter-from {
    opacity: 0;
}

/* Staggered Children Entry */
.parallax-enter-from .layer-content h1, 
.parallax-enter-from .layer-content h2, 
.parallax-enter-from .layer-content h3, 
.parallax-enter-from .layer-content h4, 
.parallax-enter-from .layer-content .profile-header, 
.parallax-enter-from .layer-content .section-header, 
.parallax-enter-from .layer-content .archive-header,
.parallax-enter-from .layer-content .detail-grid,
.parallax-enter-from .layer-content .project-list,
.parallax-enter-from .layer-content .skills-list,
.parallax-enter-from .layer-content .archive-tabs,
.parallax-enter-from .layer-content .projects-visual-section,
.parallax-enter-from .layer-content .skills-visual,
.parallax-enter-from .layer-content .archive-right {
    opacity: 0;
    transform: translateY(20px);
}

/* --- Stagger Logic (Targeting specific semantic elements) --- */

/* Group 1: Headings & Top Labels (Immediately) */
.parallax-enter-active .layer-content h1,
.parallax-enter-active .layer-content h2,
.parallax-enter-active .layer-content h3,
.parallax-enter-active .layer-content h4,
.parallax-enter-active .layer-content .profile-header,
.parallax-enter-active .layer-content .section-header,
.parallax-enter-active .layer-content .archive-header {
    transition-delay: 0.05s;
}

.parallax-leave-active .layer-content h1,
.parallax-leave-active .layer-content h2,
.parallax-leave-active .layer-content h3,
.parallax-leave-active .layer-content h4,
.parallax-leave-active .layer-content .profile-header,
.parallax-leave-active .layer-content .section-header,
.parallax-leave-active .layer-content .archive-header {
    transition-delay: 0.00s;
}

/* Group 2: Main Lists & Grids (Delayed) */
.parallax-enter-active .layer-content .detail-grid,
.parallax-enter-active .layer-content .project-list,
.parallax-enter-active .layer-content .skills-list,
.parallax-enter-active .layer-content .archive-tabs {
    transition-delay: 0.15s;
}

.parallax-leave-active .layer-content .detail-grid,
.parallax-leave-active .layer-content .project-list,
.parallax-leave-active .layer-content .skills-list,
.parallax-leave-active .layer-content .archive-tabs {
    transition-delay: 0.10s;
}

/* Group 3: Right Visuals & Details (Most Delayed) */
.parallax-enter-active .layer-content .projects-visual-section,
.parallax-enter-active .layer-content .skills-visual,
.parallax-enter-active .layer-content .archive-right {
    transition-delay: 0.25s;
}

.parallax-leave-active .layer-content .projects-visual-section,
.parallax-leave-active .layer-content .skills-visual,
.parallax-leave-active .layer-content .archive-right {
    transition-delay: 0.20s;
}


/* --- Scroll Number Animation (01, 02...) --- */
.num-slide-enter-active,
.num-slide-leave-active {
  transition: all 0.5s cubic-bezier(0.22, 1, 0.36, 1);
  position: absolute; /* 避免布局挤压，实现原位替换效果 */
  top: 0;
  left: 0;
  width: 100%; /* Ensure it centers correctly in the fixed parent */
}

.num-slide-enter-from {
  opacity: 0;
  transform: translateY(20px);
}

.num-slide-leave-to {
  opacity: 0;
  transform: translateY(-20px);
}

.num-slide-enter-to,
.num-slide-leave-from {
  opacity: 1;
  transform: translateY(0);
}